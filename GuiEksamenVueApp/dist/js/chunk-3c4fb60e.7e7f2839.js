(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c4fb60e"],{1715:function(t,e,s){"use strict";s("df4c")},df4c:function(t,e,s){},ee68:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[s("main",{staticClass:"pb-3",attrs:{role:"main"}},[s("h1",{staticClass:"text-center"},[t._v("Jobs")]),s("list-jobs")],1)])])},o=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.loading?s("div",[s("p",[t._v("Please wait while we load jobs!")])]):s("div",[s("b-table-simple",{attrs:{responsive:"true",hover:"",striped:"",dark:""}},[s("b-thead",[s("b-tr",[s("b-th",[t._v("Start Date")]),s("b-th",[t._v("Customer")]),s("b-th",[t._v("Days")]),s("b-th",[t._v("Location")]),s("b-th",[t._v("Comments")]),t.userId>=0?s("b-th",[t._v("Add Expense")]):t._e(),-1==t.userId?s("b-th",[t._v("Add/Remove Model")]):t._e()],1)],1),s("b-tbody",t._l(t.jobs,function(e){return s("b-tr",{key:e.efJobId},[s("b-td",[t._v(t._s(t._f("formatDate")(e.startDate)))]),s("b-td",[t._v(t._s(e.customer))]),s("b-td",[t._v(t._s(e.days))]),s("b-td",[t._v(t._s(e.location))]),s("b-td",[t._v(t._s(e.comments))]),t.userId>=0?s("b-td",[s("AddAnExpense",{attrs:{jobId:e.efJobId}})],1):t._e(),-1==t.userId?s("b-td",[s("AddRemoveModel",{attrs:{jobId:e.efJobId}})],1):t._e()],1)}))],1)],1)])},d=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("table",[s("tr",[t._m(0),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.expenseAmount,expression:"expenseAmount"}],staticClass:"input",attrs:{type:"number",placeholder:"Enter Expense in DKK"},domProps:{value:t.expenseAmount},on:{input:function(e){e.target.composing||(t.expenseAmount=e.target.value)}}})])]),s("tr",[t._m(1),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],staticClass:"input",attrs:{type:"text",placeholder:"Write note"},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}})])])]),s("button",{staticClass:"btn btn-primary btn-block",on:{click:t.addExpense}},[t._v("Add Expense")]),s("p",[t._v(t._s(t.msg))])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("label",[t._v("Amount:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("label",[t._v("Note:")])])}],l=s("c1df"),u=s.n(l),c={props:["jobId"],data:function(){return{expenseAmount:"",note:"",msg:""}},methods:{addExpense:function(){var t=this,e=JSON.stringify({modelId:parseInt(this.getModelId),jobId:this.jobId,date:this.getNow(),text:this.note,amount:this.expenseAmount});console.log(e),fetch("https://localhost:44368/api/Expenses",{method:"POST",body:JSON.stringify({maodelId:parseInt(this.getModelId),jobId:this.jobId,date:this.getNow(),text:this.note,amount:parseInt(this.expenseAmount)}),credentials:"include",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}).then(function(e){if(200==e.status||201==e.status)return t.msg="Added the expense of "+t.expenseAmount+" DKK!",e.json();403==e.status&&(t.msg=e.status+": Access Denied!")}).then(function(e){console.log(e),t.expenseAmount="",t.note=""}).catch(function(t){console.error("Something bad happened: "+t)})},getNow:function(){return u()().format()}},computed:{getModelId:function(){return this.$store.getters.userId}}},m=c,p=s("2877"),h=Object(p["a"])(m,r,i,!1,null,null,null),b=h.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("table",[s("tr",[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.modelId,expression:"modelId"}],staticClass:"input",attrs:{type:"number",placeholder:"Enter Model-ID"},domProps:{value:t.modelId},on:{input:function(e){e.target.composing||(t.modelId=e.target.value)}}})])])]),s("div",{staticStyle:{"margin-top":"10px"}},[s("button",{staticClass:"btn btn-primary",staticStyle:{"margin-right":"15px"},on:{click:t.addModel}},[t._v(" Add ")]),s("button",{staticClass:"btn btn-danger",on:{click:t.deleteModel}},[t._v(" Remove ")])]),s("p",[t._v(t._s(t.statusMsg))])])},v=[],g={props:["jobId"],data:function(){return{modelId:"",statusMsg:""}},methods:{addModel:function(){var t=this;fetch("https://localhost:44368/api/Jobs/"+this.jobId+"/model/"+this.modelId,{method:"POST",credentials:"include",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}).then(function(e){return 200==e.status||201==e.status?t.statusMsg="Added model with ID "+t.modelId+"!":403==e.status?t.statusMsg=e.status+": Access Denied!":t.statusMsg=e.status+": Error!",e.json()}).then(function(t){console.log(t)}).catch(function(t){console.error("Something bad happened: ",t)})},deleteModel:function(){var t=this;fetch("https://localhost:44368/api/Jobs/"+this.jobId+"/model/"+this.modelId,{method:"DELETE",credentials:"include",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}).then(function(e){return 200==e.status||202==e.status?t.statusMsg="Removed model with ID "+t.modelId+"!":403==e.status?t.statusMsg=e.status+": Access Denied!":t.statusMsg=e.status+": Error!",e.json()}).then(function(t){console.log(t)}).catch(function(t){console.error("Something bad happened: ",t)})}}},I=g,_=(s("1715"),Object(p["a"])(I,f,v,!1,null,"223e5727",null)),x=_.exports,A={name:"ListOfJobs",data:function(){return{loading:!0,message:"",jobs:[],userId:this.getUserId}},components:{AddAnExpense:b,AddRemoveModel:x},mounted:function(){var t=this;this.userId=this.$store.getters.userId,fetch("https://localhost:44368/api/Jobs",{method:"GET",credentials:"include",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}).then(function(t){if(200==t.status)return t.json()}).then(function(e){console.log(e),t.jobs=e,t.loading=!1}).catch(function(e){t.loading=!1,t.message="An error has occured"+e})},computed:{getUserId:function(){return this.$store.getters.userId}}},j=A,E=Object(p["a"])(j,a,d,!1,null,"ce076742",null),M=E.exports,y={name:"ListOfJobs",components:{ListJobs:M}},w=y,C=Object(p["a"])(w,n,o,!1,null,"1c207922",null);e["default"]=C.exports}}]);
//# sourceMappingURL=chunk-3c4fb60e.7e7f2839.js.map